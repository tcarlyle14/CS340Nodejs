<!--Citations for the following file
Date: 03/15/2025
All code is based on the CS340 starter code
Title: CS 340 React Starter Guide
Type: Source Code
Author(s): Zac Maes, Devin Daniels, Michael Curry, Brianna Romrey
Code Version: 41f83aa+
URL: https://github.com/osu-cs340-ecampus/react-starter-app -->

[ <a href="/">Home</a> | <a href="/agents">Agents</a> | <a href="/properties">Properties</a> | <a href="/sellers">Sellers</a> | <a href="/transactions">Transactions</a> | <a href="/agent_property">Agent-Property</a> ]
<!-- Table to display agent-property junction data -->
<h1>Agent Property Junction</h1>
<p>Use this page to view, add, edit, or delete agent-property relationships.</p>
<table id="agent-property-table">
    <thead>
        <tr>
            <th>JunctionID</th>
            <th>Property Address</th>
            <th>Agent Name</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
        {{#each data}}
        <!-- Loop through each item in the data array and create a table row -->
        <tr data-value="{{this.JunctionID}}">
            <td>{{this.JunctionID}}</td>
            <td>{{this.PropertyAddress}}</td>
            <td>{{this.AgentName}}</td>
            <td><button onclick="deleteAgentProperty({{this.JunctionID}})">Delete</button></td>
        </tr>
        {{/each}}
    </tbody>
</table>
<!-- Form to add new agent-property relationship -->
<h2>Add New Agent-Property Relationship</h2>
<form id="add-agent-property-form" method="POST" action="/add-agent-property-form">
    <label for="input-property-id">Property: </label>
    <select name="input-property-id" id="input-property-id" required>
        {{#each properties}}
        <option value="{{this.PropertyID}}">{{this.Address}}</option>
        {{/each}}
    </select>
    
    <label for="input-agent-id">Agent: </label>
    <select name="input-agent-id" id="input-agent-id" required>
        {{#each agents}}
        <option value="{{this.AgentID}}">{{this.Name}}</option>
        {{/each}}
    </select>
    
    <input type="submit" value="Submit">
</form>
<!-- Form to update existing agent-property relationship -->
<h2>Update Agent-Property Relationship</h2>
<form id="update-agent-property-form-ajax">
    <label for="input-junction-id">Junction ID: </label>
    <select name="input-junction-id" id="junctionSelect">
        <option value="">Select a Junction</option>
        {{#each data}}
        <option value="{{this.JunctionID}}">{{this.JunctionID}}</option>
        {{/each}}
    </select>
    
    <label for="input-property-id-update">Property: </label>
    <select name="input-property-id-update" id="input-property-id-update" required>
        {{#each properties}}
        <option value="{{this.PropertyID}}">{{this.Address}}</option>
        {{/each}}
    </select>
    
    <label for="input-agent-id-update">Agent: </label>
    <select name="input-agent-id-update" id="input-agent-id-update" required>
        {{#each agents}}
        <option value="{{this.AgentID}}">{{this.Name}}</option>
        {{/each}}
    </select>
    
    <input type="submit" value="Update">
</form>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="/js/delete_agent_property.js"></script>
<script src="/js/update_agent_property.js"></script>